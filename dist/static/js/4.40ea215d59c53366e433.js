webpackJsonp([4,30],{"0haB":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"sysPermission2",props:["vm","pids","plabels"],data:function(){return{fn:"sysPermission",rootId:0,ids:"",labels:"",treeData:[],defaultExpandedKeys:[0],winBtnLoading:!1}},watch:{filterText:function(t){this.$refs.tree2.filter(t)}},methods:{filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},initTree:function(){var t=this;t.treeData=[],t.$AJAX.GET(this,t.fn+"/getTree",null,function(e){t.treeData.push(e.body.data),t.initNodes()})},initNodes:function(){var t=this;if(void 0!=this.pids||null!=this.pids){for(var e=this.pids.split(","),a=[],s=0;s<e.length;s++)a[s]=parseInt(e[s]);setTimeout(function(){t.$refs.tree2.setCheckedKeys(a)},500)}},handleCheckChange:function(t,e,a){for(var s=this.$refs.tree2.getCheckedNodes(),i="",l="",n=0;n<s.length;n++){var o=s[n];i+=o.id,l+=o.label,n<s.length-1&&(i+=",",l+=",")}this.ids=i,this.labels=l,this.vm.resourceIds=i}},mounted:function(){this.initTree()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{width:"98%","margin-left":"1%"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"14px"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" 角色授权")])]),t._v(" "),a("div",{staticClass:"grid-content bg-purple",staticStyle:{height:"300px",overflow:"auto"}},[a("el-tree",{ref:"tree2",attrs:{data:t.treeData,"default-expanded-keys":t.defaultExpandedKeys,"filter-node-method":t.filterNode,"show-checkbox":"","node-key":"id","highlight-current":"",accordion:"",draggable:""},on:{"check-change":t.handleCheckChange}})],1)])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{width:"98%","margin-left":"1%"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"14px"}},[a("i",{staticClass:"el-icon-location"}),t._v(" 权限展示")])]),t._v(" "),a("div",{staticClass:"grid-content bg-purple",staticStyle:{height:"300px",overflow:"auto"}},[t._v("\n          "+t._s(t.labels)+"\n        ")])])],1)])],1)},staticRenderFns:[]},l=a("vSla")(s,i,!1,null,null,null);e.default=l.exports},"2j7x":function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-component-div"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"批量删除，需要勾选表格行的多选框，打开弹窗，点击确认后执行批量删除操作",placement:"bottom"}},[a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-document",loading:t.btnLoading},on:{click:t.open}},[t._v("删除")])],1),t._v(" "),a("el-dialog",{attrs:{title:"确定删除？",visible:t.visible,width:"40%"},on:{"update:visible":function(e){t.visible=e},close:t.close}},[a("el-table",{staticStyle:{width:"100%","text-align":"left"},attrs:{data:t.vm.page.selection}},[a("el-table-column",{attrs:{prop:"arg1",label:t.lab1}}),t._v(" "),a("el-table-column",{attrs:{prop:"arg2",label:t.lab2}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.channel(e.row)}}},[t._v("取消")])]}}])})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.winBtnLoading},on:{click:function(e){t.visible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.winBtnLoading},on:{click:t.commit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]},i=a("vSla")({name:"my-model",props:["btnLoading","vm","lab1","lab2","fn","removeBy"],data:function(){return{winBtnLoading:!1,visible:!1}},methods:{open:function(){this.vm.page.selection&&this.vm.page.selection.length>0?this.visible=!0:this.$message({message:"请勾选要删除的数据",type:"warning"})},close:function(){this.vm.page.selection=[],this.vm.$refs.multipleTable.clearSelection(),this.visible=!1},channel:function(t){for(var e=0;e<this.vm.page.selection.length;e++)this.vm.page.selection[e].id==t.id&&this.vm.page.selection.splice(e,1);0==this.vm.page.selection.length&&this.close()},commit:function(){for(var t=this,e="",a=0;a<t.vm.page.selection.length;a++)"name"==this.removeBy?e+=t.vm.page.selection[a].arg1:e+=t.vm.page.selection[a].id,a<t.vm.page.selection.length-1&&(e+=",");var s=this.fn+"/remove?ids="+e;this.$AJAX.DELETE(this,s,function(e){t.close(),t.$emit("search")})}}},s,!1,null,null,null);e.a=i.exports},"7hxK":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("906t"),i=a("XXyE"),l=a("e6RY"),n=a("2j7x"),o=a("0haB"),r={name:"save",props:["vm"],components:{sysPermission2:o.default},data:function(){return{winBtnLoading:!1,visible:!1,resourceIds:""}},methods:{open:function(){this.visible=!0},close:function(){this.vm.cleanSmd(),this.visible=!1,this.resourceIds=""},commit:function(){var t=this;t.vm.smdParam.resourceIds=t.resourceIds,t.$AJAX.POST(t,t.vm.smdParam,t.vm.fn+"/save",!0,function(e){t.close(),t.vm.search()})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-component-div"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"打开弹窗，填写用户信息",placement:"bottom"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-news",loading:t.vm.btnLoading},on:{click:t.open}},[t._v("新增")])],1),t._v(" "),a("el-dialog",{attrs:{title:"新增",visible:t.visible,width:"40%"},on:{"update:visible":function(e){t.visible=e},close:t.close}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"ID",disabled:""},model:{value:t.vm.smdParam.id,callback:function(e){t.$set(t.vm.smdParam,"id",e)},expression:"vm.smdParam.id"}},[a("i",{staticClass:"el-input__icon el-icon-edit-outline",attrs:{slot:"suffix"},slot:"suffix"})])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"编码"},model:{value:t.vm.smdParam.code,callback:function(e){t.$set(t.vm.smdParam,"code",e)},expression:"vm.smdParam.code"}},[a("i",{staticClass:"el-input__icon el-icon-edit-outline",attrs:{slot:"suffix"},slot:"suffix"})])],1)],1),t._v(" "),a("el-row",{staticClass:"my-row",attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:t.vm.smdParam.name,callback:function(e){t.$set(t.vm.smdParam,"name",e)},expression:"vm.smdParam.name"}},[a("i",{staticClass:"el-input__icon el-icon-edit-outline",attrs:{slot:"suffix"},slot:"suffix"})])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"项目"},model:{value:t.vm.smdParam.project,callback:function(e){t.$set(t.vm.smdParam,"project",e)},expression:"vm.smdParam.project"}},t._l(t.vm.options.project,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticClass:"my-row",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("sysPermission2",{attrs:{vm:this}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.winBtnLoading},on:{click:t.close}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.winBtnLoading},on:{click:t.commit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]},d=a("vSla")(r,c,!1,null,null,null).exports,m={name:"update",props:["rowData","smdParam","options","fn"],components:{sysPermission2:o.default},data:function(){return{winBtnLoading:!1,visible:!1,resourceIds:""}},methods:{open:function(){this.setSmd(this.rowData),this.visible=!0},close:function(){this.$emit("cleanSmd"),this.visible=!1,this.resourceIds=""},setSmd:function(t){for(var e in this.smdParam)this.smdParam[e]=t[e]},commit:function(){var t=this;t.smdParam.resourceIds=t.resourceIds,t.$AJAX.PUT(this,t.smdParam,this.fn+"/update",function(e){t.close(),t.$emit("search")})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-component-div"},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.open()}}},[t._v("编辑")]),t._v(" "),a("el-dialog",{attrs:{title:"编辑",visible:t.visible,"append-to-body":""},on:{"update:visible":function(e){t.visible=e},close:t.close}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"ID",disabled:""},model:{value:t.smdParam.id,callback:function(e){t.$set(t.smdParam,"id",e)},expression:"smdParam.id"}},[a("i",{staticClass:"el-input__icon el-icon-edit-outline",attrs:{slot:"suffix"},slot:"suffix"})])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"编码"},model:{value:t.smdParam.code,callback:function(e){t.$set(t.smdParam,"code",e)},expression:"smdParam.code"}},[a("i",{staticClass:"el-input__icon el-icon-edit-outline",attrs:{slot:"suffix"},slot:"suffix"})])],1)],1),t._v(" "),a("el-row",{staticClass:"my-row",attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:t.smdParam.name,callback:function(e){t.$set(t.smdParam,"name",e)},expression:"smdParam.name"}},[a("i",{staticClass:"el-input__icon el-icon-edit-outline",attrs:{slot:"suffix"},slot:"suffix"})])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"项目"},model:{value:t.smdParam.project,callback:function(e){t.$set(t.smdParam,"project",e)},expression:"smdParam.project"}},t._l(t.options.project,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticClass:"my-row",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("sysPermission2",{attrs:{vm:this,pids:t.smdParam.resourceIds,plabels:t.rowData.resourceNames}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.winBtnLoading},on:{click:t.close}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.winBtnLoading},on:{click:t.commit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]},p=a("vSla")(m,u,!1,null,null,null).exports,v={name:"sysRole",components:{MySearch:s.a,MyReset:i.a,MyDelete:l.a,MyRemove:n.a,Save:d,Update:p},data:function(){return{fn:"sysRole",searchParam:{start:0,length:5,code:"",name:"",project:""},smdParam:{id:"",code:"",name:"",resourceIds:"",project:""},options:{project:[{value:"xls",label:"新零售后台管理系统"}]},page:{data:[],total:0,currentPage:1,selection:[]},tabLoading:!0,btnLoading:!1}},methods:{search:function(){var t=this;this.$AJAX.GET(this,this.fn+"/page",t.searchParam,function(e){t.page.data=e.body.data.data,t.page.total=e.body.data.recordsTotal})},pageSizeChange:function(t){this.searchParam.length=t,this.pageNoChange(this.page.currentPage)},pageNoChange:function(t){this.searchParam.start=(t-1)*this.searchParam.length,this.search()},pageSelectionChange:function(t){if(this.page.selection=[],t&&t.length>0)for(var e=0;e<t.length;e++){var a=t[e],s={};s.id=a.id,s.arg1=a.code,s.arg2=a.name,this.page.selection.push(s)}},projectFmt:function(t,e){return this.$OPTIONS(t.project,this.options.project)},cleanSmd:function(){for(var t in this.smdParam)this.smdParam[t]=""}},mounted:function(){this.search()}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{staticStyle:{"margin-left":"3px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"编码","prefix-icon":"el-icon-search",clearable:""},model:{value:t.searchParam.code,callback:function(e){t.$set(t.searchParam,"code",e)},expression:"searchParam.code"}})],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"名称","prefix-icon":"el-icon-search",clearable:""},model:{value:t.searchParam.name,callback:function(e){t.$set(t.searchParam,"name",e)},expression:"searchParam.name"}})],1),t._v(" "),a("el-col",{attrs:{span:5}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"项目",clearable:""},model:{value:t.searchParam.project,callback:function(e){t.$set(t.searchParam,"project",e)},expression:"searchParam.project"}},t._l(t.options.project,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticStyle:{"text-align":"left","margin-top":"10px","margin-left":"10px","padding-bottom":"10px","border-bottom":"1px solid #F2F6FC"}},[a("my-search",{attrs:{vm:this}}),t._v(" "),a("my-reset",{attrs:{vm:this}}),t._v(" "),a("save",{attrs:{vm:this}}),t._v(" "),a("my-remove",{attrs:{btnLoading:t.btnLoading,vm:this,lab1:"编码",lab2:"名称",fn:t.fn},on:{search:t.search}})],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tabLoading,expression:"tabLoading"}],ref:"multipleTable",staticClass:"my-table",attrs:{data:t.page.data,stripe:"",height:"calc(100vh - 340px)"},on:{"selection-change":t.pageSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{type:"index",width:"50",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{fixed:"left",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("update",{attrs:{rowData:e.row,smdParam:t.smdParam,options:t.options,fn:t.fn},on:{cleanSmd:t.cleanSmd,search:t.search}}),t._v(" "),a("my-delete",{attrs:{text:"名称",value:e.row.name,id:e.row.id,fn:t.fn},on:{search:t.search}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"code",label:"编码",width:"120",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"120",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"project",label:"项目",width:"150",fixed:"",formatter:t.projectFmt}}),t._v(" "),a("el-table-column",{attrs:{prop:"resourceNames",label:"权限"}})],1),t._v(" "),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":t.page.currentPage,"page-sizes":[5,6,7,8,9,10,15,20,50,100,500,1e3],"page-size":t.searchParam.length,layout:"total, sizes, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.pageSizeChange,"current-change":t.pageNoChange,"update:currentPage":function(e){t.$set(t.page,"currentPage",e)}}})],1)],1)},staticRenderFns:[]},f=a("vSla")(v,h,!1,null,null,null);e.default=f.exports},"906t":function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btn-component-div"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"根据搜索条件组合查询，如果搜索条件都为空，则查询全部",placement:"bottom"}},[a("el-button",{attrs:{size:"small",icon:"el-icon-search",loading:t.vm.btnLoading},on:{click:function(e){t.vm.search()}}},[t._v("搜索")])],1)],1)},staticRenderFns:[]},i=a("vSla")({props:["vm"],name:"my-export"},s,!1,null,null,null);e.a=i.exports},XXyE:function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btn-component-div"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"清空所有搜索条件，并刷新查询结果",placement:"bottom"}},[e("el-button",{attrs:{size:"small",icon:"el-icon-refresh",loading:this.vm.btnLoading},on:{click:this.reset}},[this._v("重置")])],1)],1)},staticRenderFns:[]},i=a("vSla")({name:"my-export",props:["vm"],methods:{reset:function(){this.$RESET(this.vm)}}},s,!1,null,null,null);e.a=i.exports},e6RY:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-component-div"},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("删除")]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e},close:function(e){t.dialogVisible=!1}}},[a("span",[t._v("确定删除「"+t._s(t.text)+"」为「"+t._s(t.value)+"」的数据？")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.btnLoading},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:t.delCommit}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]},i=a("vSla")({name:"my-delete",props:["text","value","id","fn"],data:function(){return{btnLoading:!1,dialogVisible:!1}},methods:{delCommit:function(){var t=this,e=t.fn+"/delete?id="+t.id;t.$AJAX.DELETE(t,e,function(e){t.dialogVisible=!1,t.$emit("search")})}}},s,!1,null,null,null);e.a=i.exports}});