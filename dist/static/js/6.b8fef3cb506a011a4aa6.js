webpackJsonp([6],{"0ZFC":function(e,t){},"3cXf":function(e,t,n){e.exports={default:n("RJ+u"),__esModule:!0}},K31e:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("3cXf"),a=n.n(o),i=n("ZpE2"),s=n.n(i),r=n("aozt"),l=n.n(r),u={data:function(){return{ms:0,lgbtF:!1,loginForm:{userName:"",passWord:"",validateCode:"",uuid:""}}},props:{someValue:String},components:{},beforeCreate:function(){},created:function(){console.log("Component: login.vue, Method: created, baseURL:"+l.a.defaults.baseURL)},beforeMount:function(){},mounted:function(){this.autodivheight(),this.changeImg()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},computed:{},methods:{autodivheight:function(){var e=0;window.innerHeight?e=window.innerHeight:document.body&&document.body.clientHeight&&(e=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight&&(e=document.documentElement.clientHeight),document.getElementsByClassName("login-wrapper")[0].style.height=e+"px"},changeImg:function(){var e=this,t=l.a.defaults.baseURL+"/pictureCheck";this.$http.get(t,[]).then(function(t){e.$refs.vcode.src=t.body.img,e.loginForm.uuid=t.body.uuid},function(t){e.$message.error("请求图形验证码异常")})},msF:function(){return this.ms=Math.random(),this.ms},toMd5:function(e){return s.a.createHash("md5").update(e+"1QAZ2WSX!!","utf-8").digest("hex").toUpperCase()},login:function(){var e=this,t=this;this.$refs.lgForm.validate(function(n){if(!n)return console.log("请检查输入内容"),!1;var o=new FormData;o.append("password",e.loginForm.passWord),o.append("userName",e.loginForm.userName),o.append("checkCode",e.loginForm.validateCode),o.append("uuid",e.loginForm.uuid),l.a.post("/login",o).then(function(e){if("1"==e.data.result){var n=e.data.data;t.$store.commit("saveToken",n.ticket),t.$axios.setHeaderToken(n.ticket),localStorage.setItem("loginInfo",a()(n)),console.log(n),t.$message({message:"登录成功",type:"success"}),t.$router.push("/index")}else t.$message({type:"warning",message:e.data.msg});t.changeImg()}).catch(function(e){t.$message({type:"warning",message:"网络错误"})})})}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-wrapper bg"},[n("el-container",[n("el-header",[n("h1",[e._v("新零售系统")])]),e._v(" "),n("el-main",[n("el-row",{attrs:{type:"flex"}},[n("el-col",{staticClass:"login-content",attrs:{offset:14,span:6}},[n("el-card",{staticClass:"box-card"},[n("h4",[e._v("账户登录")]),e._v(" "),n("el-form",{ref:"lgForm",attrs:{rules:e.$rules,size:"small",model:e.loginForm},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.login(t):null}}},[n("el-form-item",{attrs:{"label-width":"80px",label:"用户名",prop:"userName"}},[n("el-input",{attrs:{"auto-complete":"true",maxlength:"30",size:"small"},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,"userName",t)},expression:"loginForm.userName"}})],1),e._v(" "),n("el-form-item",{attrs:{"label-width":"80px",label:"密码",prop:"passWord"}},[n("el-input",{attrs:{maxlength:"30",type:"password",size:"small"},model:{value:e.loginForm.passWord,callback:function(t){e.$set(e.loginForm,"passWord",t)},expression:"loginForm.passWord"}})],1),e._v(" "),n("el-form-item",{attrs:{"label-width":"80px",label:"验证码"}},[n("el-input",{attrs:{maxlength:"4",size:"small"},model:{value:e.loginForm.validateCode,callback:function(t){e.$set(e.loginForm,"validateCode",t)},expression:"loginForm.validateCode"}}),e._v(" "),n("img",{ref:"vcode",staticClass:"vimg",attrs:{width:"80px",alt:"验证码"},on:{click:e.changeImg}})],1),e._v(" "),n("el-form-item",{attrs:{"label-width":"80px"}},[n("el-button",{staticStyle:{width:"100%"},attrs:{disabled:e.lgbtF,type:"primary"},on:{click:e.login}},[e._v("登录")])],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var d=n("vSla")(u,c,!1,function(e){n("0ZFC")},"data-v-25ce9b9e",null);t.default=d.exports},"RJ+u":function(e,t,n){var o=n("AKd3"),a=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}}});