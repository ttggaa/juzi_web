webpackJsonp([31],{gjY5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{width:"98%","margin-left":"1%"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"16px"}},[a("i",{staticClass:"el-icon-menu"}),t._v(" 权限")])]),t._v(" "),a("div",{staticClass:"grid-content bg-purple",staticStyle:{height:"calc(100vh - 300px)",overflow:"auto"}},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",clearable:""},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),a("el-tree",{ref:"tree",attrs:{data:t.treeData,"default-expanded-keys":t.defaultExpandedKeys,"filter-node-method":t.filterNode,"show-checkbox":"","check-strictly":"","node-key":"id","highlight-current":"",accordion:"",draggable:""},on:{"node-click":t.handleNodeClick}})],1)])],1)]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{width:"98%","margin-left":"1%"}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"16px"}},[a("i",{staticClass:"el-icon-location"}),t._v(" 当前节点信息")])]),t._v(" "),a("div",{staticClass:"grid-content bg-purple-light",style:t.currentDivStyle},[a("el-row",{staticClass:"my-row",attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("ID：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit-outline",clearable:"",disabled:""},model:{value:t.currentNodeData.id,callback:function(e){t.$set(t.currentNodeData,"id",e)},expression:"currentNodeData.id"}})],1),t._v(" "),a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("父ID：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit-outline",clearable:"",disabled:""},model:{value:t.currentNodeData.parentId,callback:function(e){t.$set(t.currentNodeData,"parentId",e)},expression:"currentNodeData.parentId"}})],1)],1),t._v(" "),a("el-row",{staticClass:"my-row",staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("名称：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit-outline",clearable:""},model:{value:t.currentNodeData.label,callback:function(e){t.$set(t.currentNodeData,"label",e)},expression:"currentNodeData.label"}})],1),t._v(" "),a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("类型：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit-outline",clearable:"",disabled:""},model:{value:t.currentNodeData.type,callback:function(e){t.$set(t.currentNodeData,"type",e)},expression:"currentNodeData.type"}})],1)],1),t._v(" "),a("el-row",{staticClass:"my-row",staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("URL：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit-outline",clearable:""},model:{value:t.currentNodeData.url,callback:function(e){t.$set(t.currentNodeData,"url",e)},expression:"currentNodeData.url"}})],1),t._v(" "),a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("是否可用：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"是否可用"},model:{value:t.currentNodeData.available,callback:function(e){t.$set(t.currentNodeData,"available",e)},expression:"currentNodeData.available"}},t._l(t.options.available,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticClass:"my-row",staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("icon：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"图标"},model:{value:t.currentNodeData.icon,callback:function(e){t.$set(t.currentNodeData,"icon",e)},expression:"currentNodeData.icon"}},t._l(t.options.icon,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("图标预览：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticStyle:{"padding-top":"10px","font-size":"24px"}},[a("i",{class:t.currentNodeData.icon})])])],1),t._v(" "),a("el-row",{staticClass:"my-row",staticStyle:{"margin-top":"5px"},attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:20}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击“子节点”按钮，展开或关闭新增子节点的页面",placement:"bottom"}},[t.showChildRow?t._e():a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-arrow-down",loading:t.winBtnLoading},on:{click:t.showChildRowClick}},[t._v("子节点")]),t._v(" "),t.showChildRow?a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-arrow-up",loading:t.winBtnLoading},on:{click:t.showChildRowClick}},[t._v("子节点")]):t._e()],1),t._v(" "),0!=t.currentNodeData.id?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击“兄弟节点”按钮，展开或关闭新增兄弟节点的页面",placement:"bottom"}},[t.showBotherRow||0==t.currentNodeData.level?t._e():a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-arrow-down",loading:t.winBtnLoading},on:{click:t.showBotherRowClick}},[t._v("兄弟节点")]),t._v(" "),t.showBotherRow&&0!=t.currentNodeData.level?a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-arrow-up",loading:t.winBtnLoading},on:{click:t.showBotherRowClick}},[t._v("兄弟节点")]):t._e()],1):t._e(),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击“修改”按钮，修改当前节点",placement:"bottom"}},[a("el-button",{attrs:{type:"primary",size:"small",plain:"",loading:t.winBtnLoading},on:{click:t.updateNode}},[t._v("修改")])],1),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击“删除”按钮，删除选中的节点及其子节点",placement:"bottom"}},[a("el-button",{attrs:{type:"danger",size:"small",plain:"",loading:t.winBtnLoading},on:{click:t.deleteCheckedKeys}},[t._v("删除")])],1)],1)],1)],1)]),t._v(" "),a("el-card",{directives:[{name:"show",rawName:"v-show",value:t.showChildRow,expression:"showChildRow"}],staticClass:"box-card",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"16px"}},[a("i",{staticClass:"el-icon-edit"}),t._v(" 新增子节点")])]),t._v(" "),a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{height:"calc(50vh - 240px)","font-size":"14px"}},[a("el-row",{staticClass:"my-row",attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("父ID：")]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit-outline",clearable:"",disabled:""},model:{value:t.childNodeData.parentId,callback:function(e){t.$set(t.childNodeData,"parentId",e)},expression:"childNodeData.parentId"}})],1)],1),t._v(" "),a("el-row",{staticClass:"my-row",staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("名称：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit-outline",clearable:""},model:{value:t.childNodeData.label,callback:function(e){t.$set(t.childNodeData,"label",e)},expression:"childNodeData.label"}})],1),t._v(" "),a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("类型：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit-outline",clearable:"",disabled:""},model:{value:t.childNodeData.type,callback:function(e){t.$set(t.childNodeData,"type",e)},expression:"childNodeData.type"}})],1)],1),t._v(" "),a("el-row",{staticClass:"my-row",staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("URL：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit-outline",clearable:""},model:{value:t.childNodeData.url,callback:function(e){t.$set(t.childNodeData,"url",e)},expression:"childNodeData.url"}})],1),t._v(" "),a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("是否可用：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"是否可用"},model:{value:t.childNodeData.available,callback:function(e){t.$set(t.childNodeData,"available",e)},expression:"childNodeData.available"}},t._l(t.options.available,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticClass:"my-row",staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("icon：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"图标"},model:{value:t.childNodeData.icon,callback:function(e){t.$set(t.childNodeData,"icon",e)},expression:"childNodeData.icon"}},t._l(t.options.icon,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("图标预览：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticStyle:{"padding-top":"10px","font-size":"24px"}},[a("i",{class:t.childNodeData.icon})])])],1),t._v(" "),a("el-row",{staticClass:"my-row",staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:20}},[a("el-button",{attrs:{type:"primary",size:"small",plain:"",loading:t.winBtnLoading},on:{click:t.saveChildNodeData}},[t._v("提交")])],1)],1)],1)]),t._v(" "),a("el-card",{directives:[{name:"show",rawName:"v-show",value:t.showBotherRow,expression:"showBotherRow"}],staticClass:"box-card",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"16px"}},[a("i",{staticClass:"el-icon-edit"}),t._v(" 新增兄弟节点")])]),t._v(" "),a("div",{staticClass:"grid-content bg-purple-light",staticStyle:{height:"calc(50vh - 240px)","font-size":"14px"}},[a("el-row",{staticClass:"my-row",attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("父ID：")]),t._v(" "),a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit-outline",clearable:"",disabled:""},model:{value:t.botherNodeData.parentId,callback:function(e){t.$set(t.botherNodeData,"parentId",e)},expression:"botherNodeData.parentId"}})],1)],1),t._v(" "),a("el-row",{staticClass:"my-row",attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("名称：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit-outline",clearable:""},model:{value:t.botherNodeData.label,callback:function(e){t.$set(t.botherNodeData,"label",e)},expression:"botherNodeData.label"}})],1),t._v(" "),a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("类型：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit-outline",clearable:"",disabled:""},model:{value:t.botherNodeData.type,callback:function(e){t.$set(t.botherNodeData,"type",e)},expression:"botherNodeData.type"}})],1)],1),t._v(" "),a("el-row",{staticClass:"my-row",attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("URL：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{"suffix-icon":"el-icon-edit-outline",clearable:""},model:{value:t.botherNodeData.url,callback:function(e){t.$set(t.botherNodeData,"url",e)},expression:"botherNodeData.url"}})],1),t._v(" "),a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("是否可用：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"是否可用"},model:{value:t.botherNodeData.available,callback:function(e){t.$set(t.botherNodeData,"available",e)},expression:"botherNodeData.available"}},t._l(t.options.available,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticClass:"my-row",attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("icon：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"图标"},model:{value:t.botherNodeData.icon,callback:function(e){t.$set(t.botherNodeData,"icon",e)},expression:"botherNodeData.icon"}},t._l(t.options.icon,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v("图标预览：")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticStyle:{"padding-top":"10px","font-size":"24px"}},[a("i",{class:t.botherNodeData.icon})])])],1),t._v(" "),a("el-row",{staticClass:"my-row",attrs:{gutter:20}},[a("el-col",{staticClass:"col-left",attrs:{span:4}},[t._v(" ")]),t._v(" "),a("el-col",{staticStyle:{"text-align":"left"},attrs:{span:20}},[a("el-button",{attrs:{type:"primary",size:"small",plain:"",loading:t.winBtnLoading},on:{click:t.saveBotherNodeData}},[t._v("提交")])],1)],1)],1)])],1)])],1)},staticRenderFns:[]},o=a("vSla")({name:"sysArea",data:function(){return{fn:"sysPermission",rootId:0,filterText:"",treeData:[],options:{available:[{value:!0,label:"可用"},{value:!1,label:"不可用"}],icon:[{value:"el-icon-document",label:"el-icon-document"},{value:"el-icon-menu",label:"el-icon-menu"}]},currentNodeData:{id:"",parentId:"",label:"",type:"",url:"",available:"",children:[],icon:""},childNodeData:{id:"",parentId:"",label:"",type:"",url:"",available:"",children:[],icon:""},botherNodeData:{id:"",parentId:"",label:"",type:"",url:"",available:"",children:[],icon:""},showChildRow:!1,showBotherRow:!1,defaultExpandedKeys:[0],winBtnLoading:!1}},watch:{filterText:function(t){this.$refs.tree.filter(t)}},computed:{currentDivStyle:function(){return 0==this.showChildRow&&0==this.showBotherRow?"height: calc(100vh - 310px);font-size:14px;":"height: calc(50vh - 190px);font-size:14px;"}},methods:{filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},initTree:function(){var t=this;t.treeData=[],t.showChildRow=!1,t.showBotherRow=!1,t.$AJAX.GET(this,t.fn+"/getTree",null,function(e){t.currentNodeData=e.body.data,t.treeData.push(t.currentNodeData)})},initIconOptions:function(){},expandNode:function(t){this.defaultExpandedKeys=[],this.defaultExpandedKeys.push(0),t&&this.defaultExpandedKeys.push(t)},handleNodeClick:function(t){this.currentNodeData=t,this.childNodeData.parentId=this.currentNodeData.id,this.botherNodeData.parentId=this.currentNodeData.parentId},showChildRowClick:function(){this.resetChildNodeData(),this.childNodeData.parentId=this.currentNodeData.id,this.childNodeData.type=this.getChildType(),this.childNodeData.available=!0,this.showChildRow=!this.showChildRow,this.showBotherRow=!1},showBotherRowClick:function(){this.resetBotherNodeData(),this.botherNodeData.parentId=this.currentNodeData.parentId,this.botherNodeData.type=this.currentNodeData.type,this.botherNodeData.available=!0,this.showBotherRow=!this.showBotherRow,this.showChildRow=!1},getChildType:function(){return"root"==this.currentNodeData.type?"branch":"branch"==this.currentNodeData.type?"leaf":"leaf"==this.currentNodeData.type?"button":""},resetCurrentNodeData:function(){this.currentNodeData.id="",this.currentNodeData.parentId="",this.currentNodeData.label="",this.currentNodeData.type="",this.currentNodeData.url="",this.currentNodeData.available="",this.currentNodeData.children=[],this.currentNodeData.icon=""},resetChildNodeData:function(){this.childNodeData.id="",this.childNodeData.parentId="",this.childNodeData.label="",this.childNodeData.type="",this.childNodeData.url="",this.childNodeData.available="",this.childNodeData.children=[],this.childNodeData.icon=""},resetBotherNodeData:function(){this.botherNodeData.id="",this.botherNodeData.parentId="",this.botherNodeData.label="",this.botherNodeData.type="",this.botherNodeData.url="",this.botherNodeData.available="",this.botherNodeData.children=[],this.botherNodeData.icon=""},setCurrentNodeData:function(t){var e=this;e.$AJAX.GET(e,e.fn+"/getById",null,function(t){e.currentNodeData=t.body.data})},saveChildNodeData:function(){var t=this;t.$AJAX.POST(t,t.childNodeData,t.fn+"/save",!0,function(e){t.initTree(),t.expandNode(t.childNodeData.parentId)})},saveBotherNodeData:function(){var t=this;t.$AJAX.POST(t,t.botherNodeData,t.fn+"/save",!0,function(e){t.initTree(),t.expandNode(t.botherNodeData.parentId)})},updateNode:function(){var t=this,e=[];e.push(t.currentNodeData),t.$AJAX.PUT(t,e,t.fn+"/update",function(e){t.initTree(),t.expandNode(t.currentNodeData.parentId)})},deleteCheckedKeys:function(){var t=this,e=this.$refs.tree.getCheckedKeys();if(e&&0!=e.length){for(var a="",l=0;l<e.length;l++){var o=e[l];0!=o&&(a+=o),l<e.length-1&&(a+=",")}var s=this;this.$confirm("此操作将永久删除勾选的节点及其子节点, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){s.$AJAX.DELETE(s,s.fn+"/delete?ids="+a,function(t){s.initTree(),s.expandNode()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}else this.$message({type:"info",message:"请勾选要删除的节点"})}},mounted:function(){this.initTree(),this.initIconOptions()}},l,!1,null,null,null);e.default=o.exports}});